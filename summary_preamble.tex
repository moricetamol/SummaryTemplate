\usepackage[]{pdfpages} % To include pdf files
\usepackage{subfiles} % To split big projects into smaller files for faster compilation
\usepackage{lmodern}
\usepackage{multicol} % To make multiple columns on one page
\usepackage[most]{tcolorbox}
\usepackage{graphicx}
\usepackage[margin=2cm]{geometry}
\usepackage[table,xcdraw,dvipsnames,svgnames]{xcolor} % More colours
\usepackage{amsmath,amsfonts,amsthm,amssymb} % Math & symbols
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{float}
\usepackage{enumitem}
\usepackage{tabularx}
\usepackage{array}

\usepackage[protrusion=true,expansion=true]{microtype}

\newcommand{\vcentered}[1]{
    \begingroup
    \setbox0=\hbox{#1}
    \parbox{\wd0}{\box0}\endgroup
}

%-----------------------------------
% Table of Contents
%-----------------------------------
\usepackage{tocloft}
\setcounter{tocdepth}{3} % Exclude subsubsections
\addtolength{\cftsecnumwidth}{0pt} % Set width between title of section and number of section
\renewcommand{\contentsname}{\vspace{-20pt}}
\usepackage[colorlinks, linkcolor=black, urlcolor=cyan]{hyperref} % For hyperlinks, automatically created for table of contents
\usepackage{xr-hyper}

% Some nice colors
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codeorange}{RGB}{236, 124, 48}
\definecolor{codeblue}{RGB}{70, 113, 196}
\definecolor{codered}{RGB}{192, 0, 0}
\definecolor{backcolour}{rgb}{0.95,0.95,0.95}

%-----------------------------------
% Algorithms
%-----------------------------------
\usepackage{listings} % Mostly for actual code

\lstdefinestyle{mystyle}{
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    firstnumber=auto,
    frame=topline,
    frameround=tttt,
    otherkeywords={requires,ensures,postcondition,precondition,contract,assert, assignable, \\forall, \\exists, \\result, measured_by},
}

\lstset{style=mystyle,}

\usepackage[
    linesnumbered,
    lined,
    %ruled,
    vlined,
    %boxed,
    commentsnumbered,
    ]{algorithm2e}% Mostly Pseudocode

\SetAlgoNlRelativeSize{-1}

\usepackage{algpseudocode}
\usepackage{algorithmicx}
\newcommand\mycommfont[1]{\small\ttfamily\textcolor{codegreen}{#1}}
\SetCommentSty{mycommfont}

\SetKw{KwFalse}{\color{magenta}false}
\SetKw{KwTrue}{\color{magenta}true}
\SetKw{KwRet}{\color{red}return}
\SetKw{KwContinue}{\color{magenta}continue}
\SetKw{KwBreak}{\color{magenta}break}
\SetKw{KwDownTo}{down to}
\SetKw{KwAnd}{\color{magenta}and}
\SetKw{KwOr}{\color{magenta}or}
\SetKw{KwNot}{\color{magenta}not}
\SetKw{KwIn}{\color{magenta}in}
\SetKw{KwError}{\color{red}error}
\SetKw{KwNil}{\color{magenta}NIL}
\SetKw{KwPrint}{\color{magenta}print}

\SetKw{KwFloat}{\color{teal}float}
\SetKw{KwInt}{\color{teal}int}
\SetKw{KwString}{\color{teal}String}
\SetKw{KwBool}{\color{teal}bool}
\SetKw{KwChar}{\color{teal}char}

\SetKwFor{For}{\color{codegreen}For}{\color{codegreen}do}{\color{codegreen}end}
\SetKwFor{ForEach}{\color{codegreen}ForEach}{\color{codegreen}do}{\color{codegreen}end}
\SetKwFor{While}{\color{codegreen}While}{\color{codegreen}do}{\color{codegreen}end}
\SetKwIF{If}{ElseIf}{Else}{\color{codegreen}If}{\color{codegreen}then}{\color{codegreen}Else If}{\color{codegreen}Else}{\color{codegreen}end}
\SetKwProg{Fn}{\color{codegreen}Function}{:}{}
\SetKwProg{Cl}{\color{codegreen}Class}{:}{}

%-----------------------------------
% Tikz for graphs etc.
%-----------------------------------
\usepackage{tikz}
\usepackage{tkz-graph}
\usetikzlibrary{matrix,
                backgrounds,
                positioning,
                trees,
                shapes.geometric,
                calc,
                arrows,
                chains,
}

%-------------------------------------
% Captions
%-------------------------------------
\usepackage[hang, small,labelfont=bf,up,textfont=it,up,labelformat=empty]{caption}

\usepackage[]{sectsty}
\usepackage{titlesec}
%------------------------
% Footer and Header
%------------------------
\usepackage[]{fancyhdr} % For footers and header
\pagestyle{fancy}
\usepackage[]{lastpage} %For page reference: Page x out of y

\lhead{} % Left Header
\chead{} % Centre Header
\rhead{} % Right Header

\lfoot{\footnotesize \leftmark } % Left Footer
\cfoot{\footnotesize \rightmark} % Centre Footer
\rfoot{\footnotesize Page \thepage\ of \pageref{LastPage}} % Right Footer - Page Reference

\renewcommand{\headrulewidth}{0.0pt} % Sets size of header rule - here its not visible
\renewcommand{\footrulewidth}{0.4pt} % Sets size of footer rule
%----------------------------------------------
% Title
%----------------------------------------------
\usepackage{titling}
\input{summary_individuals.tex}
%-----------------------------
% Section Style
%-----------------------------

\newcommand{\SectionFont}{\LARGE\bfseries}
\titleformat{\section} % Type of heading to format
%[] % Shape
{\color{\MainColor} \titlerule[15pt] \color{White} \titlerule[7pt] \color{Black} \titlerule[2pt] \SectionFont} % Format
{\thesection} % Label
{1em} % Seperator
{\SectionFont} % Before-Code
[{\titlerule[2pt]}] % After-Code

\newcommand{\SubSectionFont}{\large\bfseries}
\titleformat{\subsection} % Type of heading to format
%[] % Shape
{\SubSectionFont} % Format
{\thesubsection} % Label
{1em} % Seperator
{\SubSectionFont} % Before-Code
[{\color{\MainColor}\titlerule[1pt]\color{White}\titlerule[0.5pt]\color{\MainColor}\titlerule[1pt]}] % After-Code

\newcommand{\SubSubSectionFont}{\bfseries}
\titleformat{\subsubsection} % Type of heading to format
%[] % Shape
{\SubSubSectionFont} % Format
{\thesubsubsection} % Label
{1em} % Seperator
{\SubSubSectionFont} % Before-Code
[{\color{\MainColor}\titlerule[1pt]}] % After-Code

\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\arabic{section}.\arabic{subsection}.\arabic{subsubsection}}

%----------------------------------
% Graphics
%----------------------------------
\usepackage{etoolbox}
\usepackage{tcolorbox}
\tcbset{
    boxrule=1pt,
    fonttitle=\bfseries,
    width=\textwidth,
    before=\vspace{2pt},
    after=\vspace{2pt},
    inlbox/.style={
        boxsep=0pt, left=6pt, right=6pt, top=2pt, bottom=2pt,
        arc=5pt, 
        before upper={\rule[-3pt]{0pt}{10pt}},
        on line,
        before=\space,
        after=\space
    },
    definitionbox/.style={
        colback=\MainColor!2!white,
        colframe=\MainColor!85!black
    },
    mathematicsbox/.style={
        colback=\MathColor!2!white,
        colframe=\MathColor!85!black
    },
    codingbox/.style={
        colback=\CodeColor!2!white,
        colframe=\CodeColor!85!black
    }
}

%----------------------------------
% Definition Boxes

\NewDocumentEnvironment{defbox}{O{} O{}}{
    \IfNoValueTF{#2}
    {\tcolorbox[definitionbox,title=#1]} % If only one argument is given, its assumed to be the title
    {\tcolorbox[definitionbox,title=#1,#2]} % If two arguments are given, the first is the title and the second is the content
}{\endtcolorbox}

\newtcolorbox[]{defbox*}[1][]{
    definitionbox,
    #1
}

\NewDocumentEnvironment{smalldefbox}{O{} O{}}{
    \IfNoValueTF{#2}
    {\tcolorbox[definitionbox,hbox,title=#1]} % If only one argument is given, its assumed to be the title
    {\tcolorbox[definitionbox,hbox,title=#1,#2]} % If two arguments are given, the first is the title and the second is the content
}{\endtcolorbox}

\newtcolorbox[]{smalldefbox*}[1][]{
    definitionbox,
    hbox,
    #1
}
\newtcbox{\inldefbox}[1][]{
    definitionbox,
    inlbox,
    #1
}
\newtcolorbox[]{csdb*}[1][]{
    definitionbox,
    hbox,
    center,
    #1
}

%----------------------------------
% Math Boxes

\NewDocumentEnvironment{mathbox}{O{} O{}}{
    \IfNoValueTF{#2}
    {\tcolorbox[mathematicsbox,title=#1]} % If only one argument is given, its assumed to be the title
    {\tcolorbox[mathematicsbox,title=#1,#2]} % If two arguments are given, the first is the title and the second is the content
}{\endtcolorbox}

\newtcolorbox[]{mathbox*}[1][]{
    mathematicsbox,
    #1
}

\NewDocumentEnvironment{smallmathbox}{O{} O{}}{
    \IfNoValueTF{#2}
    {\tcolorbox[mathematicsbox,hbox,title=#1]} % If only one argument is given, its assumed to be the title
    {\tcolorbox[mathematicsbox,hbox,title=#1,#2]} % If two arguments are given, the first is the title and the second is the content
}{\endtcolorbox}

\newtcolorbox[]{smallmathbox*}[1][]{
    mathematicsbox,
    hbox,
    #1
}
\newtcbox{\inlmathbox}[1][]{
    mathematicsbox,
    inlbox,
    #1
}
\newtcolorbox[]{csmb*}[1][]{
    mathematicsbox,
    hbox,
    center,
    #1
}

%----------------------------------
% Code Boxes

\NewDocumentEnvironment{codebox}{O{} O{}}{
    \IfNoValueTF{#2}
    {\tcolorbox[codingbox,title=#1]} % If only one argument is given, its assumed to be the title
    {\tcolorbox[codingbox,title=#1,#2]} % If two arguments are given, the first is the title and the second is the content
}{\endtcolorbox}

\newtcolorbox[]{codebox*}[1][]{
    codingbox,
    #1
}

\NewDocumentEnvironment{smallcodebox}{O{} O{}}{
    \IfNoValueTF{#2}
    {\tcolorbox[codingbox,hbox,title=#1]} % If only one argument is given, its assumed to be the title
    {\tcolorbox[codingbox,hbox,title=#1,#2]} % If two arguments are given, the first is the title and the second is the content
}{\endtcolorbox}

\newtcolorbox[]{smallcodebox*}[1][]{
    codingbox,
    hbox,
    #1
}
\newtcbox{\inlcodebox}[1][]{
    codingbox,
    inlbox,
    fontupper=\ttfamily,
    #1
}
\newtcolorbox[]{cscb*}[1][]{
    codingbox,
    hbox,
    center,
    #1
}


\newcommand\defc[1]{{\textbf{\color{\MainColor}#1}}}
\newcommand\mathc[1]{{{\color{\MathColor}#1}}}
\newcommand\codec[1]{{\texttt{\color{\CodeColor}#1}}}

\usepackage{parskip} % Removes the indentation of the first line of new section
\usepackage[toc,sort=use]{glossaries}